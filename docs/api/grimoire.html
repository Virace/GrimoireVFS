<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Python: package grimoire</title>
</head><body>

<table class="heading">
<tr class="heading-text decor">
<td class="title">&nbsp;<br><strong class="title">grimoire</strong> (version 0.1.0)</td>
<td class="extra"><a href=".">index</a><br><a href="file:h%3A%5Cprogramming%5Cpython%5Cgrimoirevfs%5Csrc%5Cgrimoire%5C__init__.py">h:\programming\python\grimoirevfs\src\grimoire\__init__.py</a></td></tr></table>
    <p><span class="code">GrimoireVFS&nbsp;-&nbsp;轻量级零依赖&nbsp;Python&nbsp;二进制资源管理库<br>
&nbsp;<br>
支持&nbsp;Manifest&nbsp;Mode&nbsp;(清单校验)&nbsp;和&nbsp;Archive&nbsp;Mode&nbsp;(资源打包)</span></p>
<p>
<table class="section">
<tr class="decor pkg-content-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Package Contents</strong></td></tr>
    
<tr><td class="decor pkg-content-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><table><tr><td class="multicolumn"><a href="grimoire.archive.html"><strong>archive</strong>&nbsp;(package)</a><br>
<a href="grimoire.converter.html">converter</a><br>
</td><td class="multicolumn"><a href="grimoire.core.html"><strong>core</strong>&nbsp;(package)</a><br>
<a href="grimoire.exceptions.html">exceptions</a><br>
</td><td class="multicolumn"><a href="grimoire.hooks.html"><strong>hooks</strong>&nbsp;(package)</a><br>
<a href="grimoire.manifest.html"><strong>manifest</strong>&nbsp;(package)</a><br>
</td><td class="multicolumn"><a href="grimoire.utils.html">utils</a><br>
</td></tr></table></td></tr></table><p>
<table class="section">
<tr class="decor index-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Classes</strong></td></tr>
    
<tr><td class="decor index-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><dl>
<dt class="heading-text"><a href="abc.html#ABC">abc.ABC</a>(<a href="builtins.html#object">builtins.object</a>)
</dt><dd>
<dl>
<dt class="heading-text"><a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>
</dt><dd>
<dl>
<dt class="heading-text"><a href="grimoire.hooks.checksum.html#CRC32Hook">grimoire.hooks.checksum.CRC32Hook</a>
</dt><dt class="heading-text"><a href="grimoire.hooks.checksum.html#MD5Hook">grimoire.hooks.checksum.MD5Hook</a>
</dt><dt class="heading-text"><a href="grimoire.hooks.checksum.html#NoneChecksumHook">grimoire.hooks.checksum.NoneChecksumHook</a>
</dt><dt class="heading-text"><a href="grimoire.hooks.checksum.html#SHA1Hook">grimoire.hooks.checksum.SHA1Hook</a>
</dt><dt class="heading-text"><a href="grimoire.hooks.checksum.html#SHA256Hook">grimoire.hooks.checksum.SHA256Hook</a>
</dt><dt class="heading-text"><a href="grimoire.hooks.rclone.html#RcloneHashHook">grimoire.hooks.rclone.RcloneHashHook</a>
</dt></dl>
</dd>
<dt class="heading-text"><a href="grimoire.hooks.base.html#CompressionHook">grimoire.hooks.base.CompressionHook</a>
</dt><dt class="heading-text"><a href="grimoire.hooks.base.html#IndexCryptoHook">grimoire.hooks.base.IndexCryptoHook</a>
</dt><dd>
<dl>
<dt class="heading-text"><a href="grimoire.hooks.crypto.html#XorObfuscateHook">grimoire.hooks.crypto.XorObfuscateHook</a>
</dt><dt class="heading-text"><a href="grimoire.hooks.crypto.html#ZlibCompressHook">grimoire.hooks.crypto.ZlibCompressHook</a>
</dt><dt class="heading-text"><a href="grimoire.hooks.crypto.html#ZlibXorHook">grimoire.hooks.crypto.ZlibXorHook</a>
</dt></dl>
</dd>
</dl>
</dd>
<dt class="heading-text"><a href="builtins.html#Exception">builtins.Exception</a>(<a href="builtins.html#BaseException">builtins.BaseException</a>)
</dt><dd>
<dl>
<dt class="heading-text"><a href="grimoire.exceptions.html#GrimoireError">grimoire.exceptions.GrimoireError</a>
</dt><dd>
<dl>
<dt class="heading-text"><a href="grimoire.exceptions.html#CorruptedDataError">grimoire.exceptions.CorruptedDataError</a>
</dt><dt class="heading-text"><a href="grimoire.exceptions.html#HashCollisionError">grimoire.exceptions.HashCollisionError</a>
</dt><dt class="heading-text"><a href="grimoire.exceptions.html#IndexNotDecryptedError">grimoire.exceptions.IndexNotDecryptedError</a>
</dt><dt class="heading-text"><a href="grimoire.exceptions.html#InvalidFormatError">grimoire.exceptions.InvalidFormatError</a>
</dt><dt class="heading-text"><a href="grimoire.exceptions.html#UnknownAlgorithmError">grimoire.exceptions.UnknownAlgorithmError</a>
</dt></dl>
</dd>
<dt class="heading-text"><a href="grimoire.hooks.rclone.html#RcloneNotFoundError">grimoire.hooks.rclone.RcloneNotFoundError</a>
</dt></dl>
</dd>
<dt class="heading-text"><a href="builtins.html#object">builtins.object</a>
</dt><dd>
<dl>
<dt class="heading-text"><a href="grimoire.archive.builder.html#ArchiveBuilder">grimoire.archive.builder.ArchiveBuilder</a>
</dt><dt class="heading-text"><a href="grimoire.archive.reader.html#ArchiveReader">grimoire.archive.reader.ArchiveReader</a>
</dt><dt class="heading-text"><a href="grimoire.converter.html#ManifestJsonConverter">grimoire.converter.ManifestJsonConverter</a>
</dt><dt class="heading-text"><a href="grimoire.converter.html#ModeConverter">grimoire.converter.ModeConverter</a>
</dt><dt class="heading-text"><a href="grimoire.manifest.builder.html#ManifestBuilder">grimoire.manifest.builder.ManifestBuilder</a>
</dt><dt class="heading-text"><a href="grimoire.manifest.reader.html#ManifestReader">grimoire.manifest.reader.ManifestReader</a>
</dt></dl>
</dd>
</dl>
 <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="ArchiveBuilder">class <strong>ArchiveBuilder</strong></a>(<a href="builtins.html#object">builtins.object</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#ArchiveBuilder">ArchiveBuilder</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;output_path:&nbsp;str,<br>
&nbsp;&nbsp;&nbsp;&nbsp;magic:&nbsp;bytes&nbsp;=&nbsp;b'GRIM',<br>
&nbsp;&nbsp;&nbsp;&nbsp;compression_hooks:&nbsp;Optional[List[<a href="#CompressionHook">CompressionHook</a>]]&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;checksum_hook:&nbsp;Optional[<a href="#ChecksumHook">ChecksumHook</a>]&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;index_crypto:&nbsp;Optional[<a href="#IndexCryptoHook">IndexCryptoHook</a>]&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;path_hash_func:&nbsp;Optional[Callable[[str],&nbsp;int]]&nbsp;=&nbsp;None<br>
)<br>
&nbsp;<br>
Archive&nbsp;文件构建器<br>
&nbsp;<br>
用于创建归档文件，包含文件索引和二进制数据。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn">Methods defined here:<br>
<dl><dt><a name="ArchiveBuilder-__init__"><strong>__init__</strong></a>(
    self,
    output_path: str,
    magic: bytes = b'GRIM',
    compression_hooks: Optional[List[CompressionHook]] = None,
    checksum_hook: Optional[ChecksumHook] = None,
    index_crypto: Optional[IndexCryptoHook] = None,
    path_hash_func: Optional[Callable[[str], int]] = None
)</dt><dd><span class="code">初始化构建器<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;output_path:&nbsp;输出文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;magic:&nbsp;自定义魔法数&nbsp;(4&nbsp;bytes)<br>
&nbsp;&nbsp;&nbsp;&nbsp;compression_hooks:&nbsp;压缩算法钩子列表<br>
&nbsp;&nbsp;&nbsp;&nbsp;checksum_hook:&nbsp;校验算法钩子&nbsp;(可选)<br>
&nbsp;&nbsp;&nbsp;&nbsp;index_crypto:&nbsp;索引加密钩子&nbsp;(可选)<br>
&nbsp;&nbsp;&nbsp;&nbsp;path_hash_func:&nbsp;自定义路径&nbsp;Hash&nbsp;函数&nbsp;(可选)</span></dd></dl>

<dl><dt><a name="ArchiveBuilder-add_dir"><strong>add_dir</strong></a>(
    self,
    local_dir: str,
    mount_point: str = '/',
    algo_id: int = 0,
    recursive: bool = True
) -&gt; int</dt><dd><span class="code">添加目录到归档<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;local_dir:&nbsp;本地目录路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;mount_point:&nbsp;虚拟挂载点<br>
&nbsp;&nbsp;&nbsp;&nbsp;algo_id:&nbsp;压缩算法&nbsp;ID<br>
&nbsp;&nbsp;&nbsp;&nbsp;recursive:&nbsp;是否递归扫描子目录<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;添加的文件数量</span></dd></dl>

<dl><dt><a name="ArchiveBuilder-add_dir_batch"><strong>add_dir_batch</strong></a>(
    self,
    local_dir: str,
    mount_point: str = '/',
    algo_id: int = 0,
    recursive: bool = True,
    exclude_patterns: Optional[List[str]] = None,
    on_error: str = 'raise',
    progress_callback: Optional[Callable[['ProgressInfo'], None]] = None
) -&gt; BatchResult</dt><dd><span class="code">批量添加目录&nbsp;(带进度回调)<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;local_dir:&nbsp;本地目录路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;mount_point:&nbsp;虚拟挂载点<br>
&nbsp;&nbsp;&nbsp;&nbsp;algo_id:&nbsp;压缩算法&nbsp;ID<br>
&nbsp;&nbsp;&nbsp;&nbsp;recursive:&nbsp;是否递归扫描<br>
&nbsp;&nbsp;&nbsp;&nbsp;exclude_patterns:&nbsp;排除的文件模式<br>
&nbsp;&nbsp;&nbsp;&nbsp;on_error:&nbsp;错误处理策略<br>
&nbsp;&nbsp;&nbsp;&nbsp;progress_callback:&nbsp;进度回调函数<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;BatchResult&nbsp;批量操作结果</span></dd></dl>

<dl><dt><a name="ArchiveBuilder-add_file"><strong>add_file</strong></a>(
    self,
    local_path: str,
    vfs_path: Optional[str] = None,
    algo_id: int = 0
) -&gt; None</dt><dd><span class="code">添加单个文件到归档<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;local_path:&nbsp;本地文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;vfs_path:&nbsp;虚拟路径&nbsp;(默认使用文件名)<br>
&nbsp;&nbsp;&nbsp;&nbsp;algo_id:&nbsp;压缩算法&nbsp;ID&nbsp;(0=不压缩)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;FileNotFoundError:&nbsp;本地文件不存在<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HashCollisionError">HashCollisionError</a>:&nbsp;路径&nbsp;Hash&nbsp;冲突<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#UnknownAlgorithmError">UnknownAlgorithmError</a>:&nbsp;未注册的压缩算法</span></dd></dl>

<dl><dt><a name="ArchiveBuilder-add_files_batch"><strong>add_files_batch</strong></a>(
    self,
    items: List[FileItem] | Iterator[FileItem],
    on_error: str = 'raise',
    progress_callback: Optional[Callable[['ProgressInfo'], None]] = None
) -&gt; BatchResult</dt><dd><span class="code">批量添加文件<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;items:&nbsp;FileItem&nbsp;列表或迭代器<br>
&nbsp;&nbsp;&nbsp;&nbsp;on_error:&nbsp;错误处理策略&nbsp;('raise',&nbsp;'skip',&nbsp;'abort')<br>
&nbsp;&nbsp;&nbsp;&nbsp;progress_callback:&nbsp;进度回调函数<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;BatchResult&nbsp;批量操作结果</span></dd></dl>

<dl><dt><a name="ArchiveBuilder-build"><strong>build</strong></a>(self) -&gt; None</dt><dd><span class="code">构建并写入&nbsp;Archive&nbsp;文件<br>
&nbsp;<br>
执行流程:<br>
1.&nbsp;预留&nbsp;FileHeader&nbsp;空间<br>
2.&nbsp;写入&nbsp;IndexHeader&nbsp;+&nbsp;String&nbsp;Tables&nbsp;+&nbsp;Entry&nbsp;Table<br>
3.&nbsp;写入&nbsp;DataHeader&nbsp;+&nbsp;Data&nbsp;Block<br>
4.&nbsp;回写&nbsp;Headers</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>compression_stats</strong></dt>
<dd><span class="code">压缩统计信息</span></dd>
</dl>
<dl><dt><strong>entry_count</strong></dt>
<dd><span class="code">已添加的文件数量</span></dd>
</dl>
<dl><dt><strong>path_stats</strong></dt>
<dd><span class="code">路径字典统计信息</span></dd>
</dl>
<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="ArchiveReader">class <strong>ArchiveReader</strong></a>(<a href="builtins.html#object">builtins.object</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#ArchiveReader">ArchiveReader</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;file_path:&nbsp;str,<br>
&nbsp;&nbsp;&nbsp;&nbsp;compression_hooks:&nbsp;Optional[List[<a href="#CompressionHook">CompressionHook</a>]]&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;checksum_hook:&nbsp;Optional[<a href="#ChecksumHook">ChecksumHook</a>]&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;index_crypto:&nbsp;Optional[<a href="#IndexCryptoHook">IndexCryptoHook</a>]&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;path_hash_func:&nbsp;Optional[Callable[[str],&nbsp;int]]&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;use_mmap:&nbsp;bool&nbsp;=&nbsp;True<br>
)<br>
&nbsp;<br>
Archive&nbsp;文件读取器<br>
&nbsp;<br>
支持两种读取模式:<br>
-&nbsp;mmap&nbsp;模式&nbsp;(默认):&nbsp;内存映射，线程安全，高性能<br>
-&nbsp;传统模式:&nbsp;标准文件&nbsp;I/O<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn">Methods defined here:<br>
<dl><dt><a name="ArchiveReader-__enter__"><strong>__enter__</strong></a>(self) -&gt; ArchiveReader</dt></dl>

<dl><dt><a name="ArchiveReader-__exit__"><strong>__exit__</strong></a>(self, *args) -&gt; None</dt></dl>

<dl><dt><a name="ArchiveReader-__init__"><strong>__init__</strong></a>(
    self,
    file_path: str,
    compression_hooks: Optional[List[CompressionHook]] = None,
    checksum_hook: Optional[ChecksumHook] = None,
    index_crypto: Optional[IndexCryptoHook] = None,
    path_hash_func: Optional[Callable[[str], int]] = None,
    use_mmap: bool = True
)</dt><dd><span class="code">初始化读取器<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;file_path:&nbsp;Archive&nbsp;文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;compression_hooks:&nbsp;解压算法钩子列表<br>
&nbsp;&nbsp;&nbsp;&nbsp;checksum_hook:&nbsp;校验算法钩子<br>
&nbsp;&nbsp;&nbsp;&nbsp;index_crypto:&nbsp;索引解密钩子<br>
&nbsp;&nbsp;&nbsp;&nbsp;path_hash_func:&nbsp;自定义路径&nbsp;Hash&nbsp;函数<br>
&nbsp;&nbsp;&nbsp;&nbsp;use_mmap:&nbsp;是否使用&nbsp;mmap&nbsp;模式</span></dd></dl>

<dl><dt><a name="ArchiveReader-close"><strong>close</strong></a>(self) -&gt; None</dt><dd><span class="code">关闭文件</span></dd></dl>

<dl><dt><a name="ArchiveReader-exists"><strong>exists</strong></a>(self, vfs_path: str) -&gt; bool</dt><dd><span class="code">检查虚拟路径是否存在</span></dd></dl>

<dl><dt><a name="ArchiveReader-extract_all"><strong>extract_all</strong></a>(
    self,
    output_dir: str,
    verify: bool = True,
    on_error: str = 'raise',
    progress_callback: Optional[Callable] = None
) -&gt; BatchResult</dt><dd><span class="code">解包所有文件到指定目录<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;output_dir:&nbsp;输出目录路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;verify:&nbsp;是否校验数据完整性<br>
&nbsp;&nbsp;&nbsp;&nbsp;on_error:&nbsp;错误处理策略<br>
&nbsp;&nbsp;&nbsp;&nbsp;progress_callback:&nbsp;进度回调函数<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;BatchResult&nbsp;批量操作结果</span></dd></dl>

<dl><dt><a name="ArchiveReader-get_all_entries"><strong>get_all_entries</strong></a>(self) -&gt; List[Dict]</dt><dd><span class="code">获取所有条目的元信息<br>
&nbsp;<br>
返回每个条目的路径、大小、压缩信息等，不包含二进制数据。<br>
如需读取数据，请使用&nbsp;<a href="#ArchiveReader-read">read</a>()&nbsp;方法。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;条目信息列表，每个元素包含:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;path:&nbsp;虚拟路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;raw_size:&nbsp;原始大小<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;packed_size:&nbsp;压缩后大小<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;algo_id:&nbsp;压缩算法&nbsp;ID&nbsp;(0=未压缩)<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;checksum:&nbsp;校验值&nbsp;(bytes)<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;checksum_hex:&nbsp;校验值&nbsp;(hex字符串)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#IndexNotDecryptedError">IndexNotDecryptedError</a>:&nbsp;索引未解密时无法遍历<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Example:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;for&nbsp;entry&nbsp;in&nbsp;reader.<a href="#ArchiveReader-get_all_entries">get_all_entries</a>():<br>
&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(f"{entry['path']}:&nbsp;{entry['raw_size']}&nbsp;bytes")<br>
&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;entry['raw_size']&nbsp;&gt;&nbsp;0:<br>
&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;reader.<a href="#ArchiveReader-read">read</a>(entry['path'])&nbsp;&nbsp;#&nbsp;按需读取</span></dd></dl>

<dl><dt><a name="ArchiveReader-get_entry"><strong>get_entry</strong></a>(self, vfs_path: str) -&gt; ArchiveEntry</dt><dd><span class="code">获取指定路径的条目信息</span></dd></dl>

<dl><dt><a name="ArchiveReader-iter_entries"><strong>iter_entries</strong></a>(self)</dt><dd><span class="code">迭代所有条目&nbsp;(生成器模式，内存友好)<br>
&nbsp;<br>
Yields:<br>
&nbsp;&nbsp;&nbsp;&nbsp;(path,&nbsp;entry)&nbsp;元组<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#IndexNotDecryptedError">IndexNotDecryptedError</a>:&nbsp;索引未解密时无法遍历</span></dd></dl>

<dl><dt><a name="ArchiveReader-list_all"><strong>list_all</strong></a>(self) -&gt; List[str]</dt><dd><span class="code">列出所有文件路径<br>
&nbsp;<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#IndexNotDecryptedError">IndexNotDecryptedError</a>:&nbsp;索引未解密</span></dd></dl>

<dl><dt><a name="ArchiveReader-list_hashes"><strong>list_hashes</strong></a>(self) -&gt; List[int]</dt><dd><span class="code">列出所有路径&nbsp;Hash</span></dd></dl>

<dl><dt><a name="ArchiveReader-open"><strong>open</strong></a>(self, vfs_path: str, verify: bool = True) -&gt; io.BytesIO</dt><dd><span class="code">以文件对象方式打开<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;vfs_path:&nbsp;虚拟路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;verify:&nbsp;是否校验数据完整性<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;BytesIO&nbsp;对象</span></dd></dl>

<dl><dt><a name="ArchiveReader-read"><strong>read</strong></a>(self, vfs_path: str, verify: bool = True) -&gt; bytes</dt><dd><span class="code">读取文件内容<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;vfs_path:&nbsp;虚拟路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;verify:&nbsp;是否校验数据完整性<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;文件原始内容<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;FileNotFoundError:&nbsp;路径不存在<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#CorruptedDataError">CorruptedDataError</a>:&nbsp;校验失败<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#UnknownAlgorithmError">UnknownAlgorithmError</a>:&nbsp;未知的解压算法</span></dd></dl>

<dl><dt><a name="ArchiveReader-read_batch"><strong>read_batch</strong></a>(
    self,
    vfs_paths: List[str],
    verify: bool = True,
    on_error: str = 'raise'
) -&gt; Dict[str, bytes]</dt><dd><span class="code">批量读取多个文件<br>
&nbsp;<br>
mmap&nbsp;模式下可实现真正的并行读取。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;vfs_paths:&nbsp;虚拟路径列表<br>
&nbsp;&nbsp;&nbsp;&nbsp;verify:&nbsp;是否校验数据完整性<br>
&nbsp;&nbsp;&nbsp;&nbsp;on_error:&nbsp;错误处理策略&nbsp;('raise',&nbsp;'skip')<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;{vfs_path:&nbsp;data}&nbsp;字典</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>data_header</strong></dt>
</dl>
<dl><dt><strong>entry_count</strong></dt>
</dl>
<dl><dt><strong>file_header</strong></dt>
</dl>
<dl><dt><strong>index_header</strong></dt>
</dl>
<dl><dt><strong>is_decrypted</strong></dt>
</dl>
<dl><dt><strong>is_mmap</strong></dt>
</dl>
<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="CRC32Hook">class <strong>CRC32Hook</strong></a>(<a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code">CRC32&nbsp;校验<br>
&nbsp;<br>
快速但较弱的校验算法，4&nbsp;字节输出。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.hooks.checksum.html#CRC32Hook">CRC32Hook</a></dd>
<dd><a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="CRC32Hook-compute"><strong>compute</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">计算校验值<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;要校验的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验值字节</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>algo_id</strong></dt>
<dd><span class="code">算法&nbsp;ID<br>
&nbsp;<br>
对应&nbsp;FileHeader&nbsp;中的&nbsp;checksum_algo&nbsp;字段。<br>
0&nbsp;=&nbsp;无校验,&nbsp;1&nbsp;=&nbsp;CRC32,&nbsp;2&nbsp;=&nbsp;MD5,&nbsp;3&nbsp;=&nbsp;SHA1,&nbsp;4&nbsp;=&nbsp;SHA256<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;算法&nbsp;ID</span></dd>
</dl>
<dl><dt><strong>digest_size</strong></dt>
<dd><span class="code">校验值字节数<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验值长度&nbsp;(bytes)</span></dd>
</dl>
<dl><dt><strong>display_name</strong></dt>
<dd><span class="code">可读名称&nbsp;(用于&nbsp;JSON&nbsp;显示)<br>
&nbsp;<br>
默认返回类名，子类可覆盖提供更友好的名称。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;可读名称字符串</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__abstractmethods__</strong> = frozenset()</dl>

<hr>
Methods inherited from <a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>:<br>
<dl><dt><a name="CRC32Hook-verify"><strong>verify</strong></a>(self, data: bytes, expected: bytes) -&gt; bool</dt><dd><span class="code">验证校验值<br>
&nbsp;<br>
默认实现直接比较计算结果和期望值。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;要校验的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;expected:&nbsp;期望的校验值<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验是否通过</span></dd></dl>

<hr>
Data descriptors inherited from <a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="ChecksumHook">class <strong>ChecksumHook</strong></a>(<a href="abc.html#ABC">abc.ABC</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code">校验算法钩子<br>
&nbsp;<br>
用于实现自定义校验算法&nbsp;(如&nbsp;MD5,&nbsp;SHA1,&nbsp;CRC32)。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.hooks.base.html#ChecksumHook">ChecksumHook</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="ChecksumHook-compute"><strong>compute</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">计算校验值<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;要校验的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验值字节</span></dd></dl>

<dl><dt><a name="ChecksumHook-verify"><strong>verify</strong></a>(self, data: bytes, expected: bytes) -&gt; bool</dt><dd><span class="code">验证校验值<br>
&nbsp;<br>
默认实现直接比较计算结果和期望值。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;要校验的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;expected:&nbsp;期望的校验值<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验是否通过</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>algo_id</strong></dt>
<dd><span class="code">算法&nbsp;ID<br>
&nbsp;<br>
对应&nbsp;FileHeader&nbsp;中的&nbsp;checksum_algo&nbsp;字段。<br>
0&nbsp;=&nbsp;无校验,&nbsp;1&nbsp;=&nbsp;CRC32,&nbsp;2&nbsp;=&nbsp;MD5,&nbsp;3&nbsp;=&nbsp;SHA1,&nbsp;4&nbsp;=&nbsp;SHA256<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;算法&nbsp;ID</span></dd>
</dl>
<dl><dt><strong>digest_size</strong></dt>
<dd><span class="code">校验值字节数<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验值长度&nbsp;(bytes)</span></dd>
</dl>
<dl><dt><strong>display_name</strong></dt>
<dd><span class="code">可读名称&nbsp;(用于&nbsp;JSON&nbsp;显示)<br>
&nbsp;<br>
默认返回类名，子类可覆盖提供更友好的名称。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;可读名称字符串</span></dd>
</dl>
<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__abstractmethods__</strong> = frozenset({'algo_id', 'compute', 'digest_size'})</dl>

</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="CompressionHook">class <strong>CompressionHook</strong></a>(<a href="abc.html#ABC">abc.ABC</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code">压缩算法钩子<br>
&nbsp;<br>
用于实现自定义压缩算法&nbsp;(如&nbsp;Zstd,&nbsp;LZ4,&nbsp;LZMA)。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.hooks.base.html#CompressionHook">CompressionHook</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="CompressionHook-compress"><strong>compress</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">压缩数据<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;原始数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;压缩后的数据</span></dd></dl>

<dl><dt><a name="CompressionHook-decompress"><strong>decompress</strong></a>(self, data: bytes, raw_size: int) -&gt; bytes</dt><dd><span class="code">解压数据<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;压缩后的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;raw_size:&nbsp;原始大小，用于预分配缓冲区<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;解压后的数据</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>algo_id</strong></dt>
<dd><span class="code">算法&nbsp;ID<br>
&nbsp;<br>
必须唯一，存储在&nbsp;Entry&nbsp;的&nbsp;algo_id&nbsp;字段中。<br>
0&nbsp;保留为"无压缩"。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;1-255&nbsp;之间的整数</span></dd>
</dl>
<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__abstractmethods__</strong> = frozenset({'algo_id', 'compress', 'decompress'})</dl>

</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="CorruptedDataError">class <strong>CorruptedDataError</strong></a>(<a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#CorruptedDataError">CorruptedDataError</a>(vfs_path:&nbsp;str,&nbsp;expected:&nbsp;bytes,&nbsp;actual:&nbsp;bytes)<br>
&nbsp;<br>
数据损坏异常<br>
&nbsp;<br>
当文件校验失败时抛出，可能由于传输错误或文件被篡改。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.exceptions.html#CorruptedDataError">CorruptedDataError</a></dd>
<dd><a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a></dd>
<dd><a href="builtins.html#Exception">builtins.Exception</a></dd>
<dd><a href="builtins.html#BaseException">builtins.BaseException</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="CorruptedDataError-__init__"><strong>__init__</strong></a>(self, vfs_path: str, expected: bytes, actual: bytes)</dt><dd><span class="code">Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<hr>
Data descriptors inherited from <a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a>:<br>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
<hr>
Static methods inherited from <a href="builtins.html#Exception">builtins.Exception</a>:<br>
<dl><dt><a name="CorruptedDataError-__new__"><strong>__new__</strong></a>(*args, **kwargs)<span class="grey"><span class="heading-text"> class method of <a href="builtins.html#Exception">builtins.Exception</a></span></span></dt><dd><span class="code">Create&nbsp;and&nbsp;return&nbsp;a&nbsp;new&nbsp;<a href="builtins.html#object">object</a>.&nbsp;&nbsp;See&nbsp;help(type)&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<hr>
Methods inherited from <a href="builtins.html#BaseException">builtins.BaseException</a>:<br>
<dl><dt><a name="CorruptedDataError-__reduce__"><strong>__reduce__</strong></a>(self, /)</dt><dd><span class="code">Helper&nbsp;for&nbsp;pickle.</span></dd></dl>

<dl><dt><a name="CorruptedDataError-__repr__"><strong>__repr__</strong></a>(self, /)</dt><dd><span class="code">Return&nbsp;repr(self).</span></dd></dl>

<dl><dt><a name="CorruptedDataError-__setstate__"><strong>__setstate__</strong></a>(self, state, /)</dt></dl>

<dl><dt><a name="CorruptedDataError-__str__"><strong>__str__</strong></a>(self, /)</dt><dd><span class="code">Return&nbsp;str(self).</span></dd></dl>

<dl><dt><a name="CorruptedDataError-add_note"><strong>add_note</strong></a>(self, note, /)</dt><dd><span class="code">Add&nbsp;a&nbsp;note&nbsp;to&nbsp;the&nbsp;exception</span></dd></dl>

<dl><dt><a name="CorruptedDataError-with_traceback"><strong>with_traceback</strong></a>(self, tb, /)</dt><dd><span class="code">Set&nbsp;self.<strong>__traceback__</strong>&nbsp;to&nbsp;tb&nbsp;and&nbsp;return&nbsp;self.</span></dd></dl>

<hr>
Data descriptors inherited from <a href="builtins.html#BaseException">builtins.BaseException</a>:<br>
<dl><dt><strong>__cause__</strong></dt>
</dl>
<dl><dt><strong>__context__</strong></dt>
</dl>
<dl><dt><strong>__dict__</strong></dt>
</dl>
<dl><dt><strong>__suppress_context__</strong></dt>
</dl>
<dl><dt><strong>__traceback__</strong></dt>
</dl>
<dl><dt><strong>args</strong></dt>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="GrimoireError">class <strong>GrimoireError</strong></a>(<a href="builtins.html#Exception">builtins.Exception</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code">GrimoireVFS&nbsp;基础异常<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a></dd>
<dd><a href="builtins.html#Exception">builtins.Exception</a></dd>
<dd><a href="builtins.html#BaseException">builtins.BaseException</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
<hr>
Static methods inherited from <a href="builtins.html#Exception">builtins.Exception</a>:<br>
<dl><dt><a name="GrimoireError-__new__"><strong>__new__</strong></a>(*args, **kwargs)<span class="grey"><span class="heading-text"> class method of <a href="builtins.html#Exception">builtins.Exception</a></span></span></dt><dd><span class="code">Create&nbsp;and&nbsp;return&nbsp;a&nbsp;new&nbsp;<a href="builtins.html#object">object</a>.&nbsp;&nbsp;See&nbsp;help(type)&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<hr>
Methods inherited from <a href="builtins.html#BaseException">builtins.BaseException</a>:<br>
<dl><dt><a name="GrimoireError-__init__"><strong>__init__</strong></a>(self, /, *args, **kwargs)</dt><dd><span class="code">Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<dl><dt><a name="GrimoireError-__reduce__"><strong>__reduce__</strong></a>(self, /)</dt><dd><span class="code">Helper&nbsp;for&nbsp;pickle.</span></dd></dl>

<dl><dt><a name="GrimoireError-__repr__"><strong>__repr__</strong></a>(self, /)</dt><dd><span class="code">Return&nbsp;repr(self).</span></dd></dl>

<dl><dt><a name="GrimoireError-__setstate__"><strong>__setstate__</strong></a>(self, state, /)</dt></dl>

<dl><dt><a name="GrimoireError-__str__"><strong>__str__</strong></a>(self, /)</dt><dd><span class="code">Return&nbsp;str(self).</span></dd></dl>

<dl><dt><a name="GrimoireError-add_note"><strong>add_note</strong></a>(self, note, /)</dt><dd><span class="code">Add&nbsp;a&nbsp;note&nbsp;to&nbsp;the&nbsp;exception</span></dd></dl>

<dl><dt><a name="GrimoireError-with_traceback"><strong>with_traceback</strong></a>(self, tb, /)</dt><dd><span class="code">Set&nbsp;self.<strong>__traceback__</strong>&nbsp;to&nbsp;tb&nbsp;and&nbsp;return&nbsp;self.</span></dd></dl>

<hr>
Data descriptors inherited from <a href="builtins.html#BaseException">builtins.BaseException</a>:<br>
<dl><dt><strong>__cause__</strong></dt>
</dl>
<dl><dt><strong>__context__</strong></dt>
</dl>
<dl><dt><strong>__dict__</strong></dt>
</dl>
<dl><dt><strong>__suppress_context__</strong></dt>
</dl>
<dl><dt><strong>__traceback__</strong></dt>
</dl>
<dl><dt><strong>args</strong></dt>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="HashCollisionError">class <strong>HashCollisionError</strong></a>(<a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#HashCollisionError">HashCollisionError</a>(path1:&nbsp;str,&nbsp;path2:&nbsp;str,&nbsp;hash_value:&nbsp;int)<br>
&nbsp;<br>
路径&nbsp;Hash&nbsp;冲突异常<br>
&nbsp;<br>
当两个不同的路径产生相同的&nbsp;path_hash&nbsp;时抛出。<br>
这种情况极为罕见&nbsp;(xxHash64&nbsp;冲突概率约&nbsp;1/2^64)，但理论上存在。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.exceptions.html#HashCollisionError">HashCollisionError</a></dd>
<dd><a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a></dd>
<dd><a href="builtins.html#Exception">builtins.Exception</a></dd>
<dd><a href="builtins.html#BaseException">builtins.BaseException</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="HashCollisionError-__init__"><strong>__init__</strong></a>(self, path1: str, path2: str, hash_value: int)</dt><dd><span class="code">Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<hr>
Data descriptors inherited from <a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a>:<br>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
<hr>
Static methods inherited from <a href="builtins.html#Exception">builtins.Exception</a>:<br>
<dl><dt><a name="HashCollisionError-__new__"><strong>__new__</strong></a>(*args, **kwargs)<span class="grey"><span class="heading-text"> class method of <a href="builtins.html#Exception">builtins.Exception</a></span></span></dt><dd><span class="code">Create&nbsp;and&nbsp;return&nbsp;a&nbsp;new&nbsp;<a href="builtins.html#object">object</a>.&nbsp;&nbsp;See&nbsp;help(type)&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<hr>
Methods inherited from <a href="builtins.html#BaseException">builtins.BaseException</a>:<br>
<dl><dt><a name="HashCollisionError-__reduce__"><strong>__reduce__</strong></a>(self, /)</dt><dd><span class="code">Helper&nbsp;for&nbsp;pickle.</span></dd></dl>

<dl><dt><a name="HashCollisionError-__repr__"><strong>__repr__</strong></a>(self, /)</dt><dd><span class="code">Return&nbsp;repr(self).</span></dd></dl>

<dl><dt><a name="HashCollisionError-__setstate__"><strong>__setstate__</strong></a>(self, state, /)</dt></dl>

<dl><dt><a name="HashCollisionError-__str__"><strong>__str__</strong></a>(self, /)</dt><dd><span class="code">Return&nbsp;str(self).</span></dd></dl>

<dl><dt><a name="HashCollisionError-add_note"><strong>add_note</strong></a>(self, note, /)</dt><dd><span class="code">Add&nbsp;a&nbsp;note&nbsp;to&nbsp;the&nbsp;exception</span></dd></dl>

<dl><dt><a name="HashCollisionError-with_traceback"><strong>with_traceback</strong></a>(self, tb, /)</dt><dd><span class="code">Set&nbsp;self.<strong>__traceback__</strong>&nbsp;to&nbsp;tb&nbsp;and&nbsp;return&nbsp;self.</span></dd></dl>

<hr>
Data descriptors inherited from <a href="builtins.html#BaseException">builtins.BaseException</a>:<br>
<dl><dt><strong>__cause__</strong></dt>
</dl>
<dl><dt><strong>__context__</strong></dt>
</dl>
<dl><dt><strong>__dict__</strong></dt>
</dl>
<dl><dt><strong>__suppress_context__</strong></dt>
</dl>
<dl><dt><strong>__traceback__</strong></dt>
</dl>
<dl><dt><strong>args</strong></dt>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="IndexCryptoHook">class <strong>IndexCryptoHook</strong></a>(<a href="abc.html#ABC">abc.ABC</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code">索引加密钩子<br>
&nbsp;<br>
用于加密/解密&nbsp;String&nbsp;Tables&nbsp;区域。<br>
注意：只用于索引区，不用于数据区。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.hooks.base.html#IndexCryptoHook">IndexCryptoHook</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="IndexCryptoHook-decrypt"><strong>decrypt</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">解密数据<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;加密后的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;解密后的数据</span></dd></dl>

<dl><dt><a name="IndexCryptoHook-encrypt"><strong>encrypt</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">加密数据<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;原始数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;加密后的数据</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>display_name</strong></dt>
<dd><span class="code">可读名称&nbsp;(用于&nbsp;JSON&nbsp;显示)<br>
&nbsp;<br>
默认返回类名，子类可覆盖提供更友好的名称。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;可读名称字符串</span></dd>
</dl>
<dl><dt><strong>flags_id</strong></dt>
<dd><span class="code">标志位&nbsp;ID<br>
&nbsp;<br>
对应&nbsp;FileHeader&nbsp;中的&nbsp;flags&nbsp;字段。<br>
用于标识使用了什么类型的索引加密/压缩。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;标志位值&nbsp;(e.g.,&nbsp;0x01,&nbsp;0x02,&nbsp;0x03)</span></dd>
</dl>
<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__abstractmethods__</strong> = frozenset({'decrypt', 'encrypt', 'flags_id'})</dl>

</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="IndexNotDecryptedError">class <strong>IndexNotDecryptedError</strong></a>(<a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#IndexNotDecryptedError">IndexNotDecryptedError</a>(message:&nbsp;str&nbsp;=&nbsp;None)<br>
&nbsp;<br>
索引未解密异常<br>
&nbsp;<br>
当尝试遍历文件列表但索引区加密且未提供解密器时抛出。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.exceptions.html#IndexNotDecryptedError">IndexNotDecryptedError</a></dd>
<dd><a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a></dd>
<dd><a href="builtins.html#Exception">builtins.Exception</a></dd>
<dd><a href="builtins.html#BaseException">builtins.BaseException</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="IndexNotDecryptedError-__init__"><strong>__init__</strong></a>(self, message: str = None)</dt><dd><span class="code">Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<hr>
Data descriptors inherited from <a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a>:<br>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
<hr>
Static methods inherited from <a href="builtins.html#Exception">builtins.Exception</a>:<br>
<dl><dt><a name="IndexNotDecryptedError-__new__"><strong>__new__</strong></a>(*args, **kwargs)<span class="grey"><span class="heading-text"> class method of <a href="builtins.html#Exception">builtins.Exception</a></span></span></dt><dd><span class="code">Create&nbsp;and&nbsp;return&nbsp;a&nbsp;new&nbsp;<a href="builtins.html#object">object</a>.&nbsp;&nbsp;See&nbsp;help(type)&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<hr>
Methods inherited from <a href="builtins.html#BaseException">builtins.BaseException</a>:<br>
<dl><dt><a name="IndexNotDecryptedError-__reduce__"><strong>__reduce__</strong></a>(self, /)</dt><dd><span class="code">Helper&nbsp;for&nbsp;pickle.</span></dd></dl>

<dl><dt><a name="IndexNotDecryptedError-__repr__"><strong>__repr__</strong></a>(self, /)</dt><dd><span class="code">Return&nbsp;repr(self).</span></dd></dl>

<dl><dt><a name="IndexNotDecryptedError-__setstate__"><strong>__setstate__</strong></a>(self, state, /)</dt></dl>

<dl><dt><a name="IndexNotDecryptedError-__str__"><strong>__str__</strong></a>(self, /)</dt><dd><span class="code">Return&nbsp;str(self).</span></dd></dl>

<dl><dt><a name="IndexNotDecryptedError-add_note"><strong>add_note</strong></a>(self, note, /)</dt><dd><span class="code">Add&nbsp;a&nbsp;note&nbsp;to&nbsp;the&nbsp;exception</span></dd></dl>

<dl><dt><a name="IndexNotDecryptedError-with_traceback"><strong>with_traceback</strong></a>(self, tb, /)</dt><dd><span class="code">Set&nbsp;self.<strong>__traceback__</strong>&nbsp;to&nbsp;tb&nbsp;and&nbsp;return&nbsp;self.</span></dd></dl>

<hr>
Data descriptors inherited from <a href="builtins.html#BaseException">builtins.BaseException</a>:<br>
<dl><dt><strong>__cause__</strong></dt>
</dl>
<dl><dt><strong>__context__</strong></dt>
</dl>
<dl><dt><strong>__dict__</strong></dt>
</dl>
<dl><dt><strong>__suppress_context__</strong></dt>
</dl>
<dl><dt><strong>__traceback__</strong></dt>
</dl>
<dl><dt><strong>args</strong></dt>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="InvalidFormatError">class <strong>InvalidFormatError</strong></a>(<a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#InvalidFormatError">InvalidFormatError</a>(message:&nbsp;str,&nbsp;expected:&nbsp;str&nbsp;=&nbsp;None,&nbsp;actual:&nbsp;str&nbsp;=&nbsp;None)<br>
&nbsp;<br>
文件格式无效异常<br>
&nbsp;<br>
当文件魔法数、版本号或结构不符合预期时抛出。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.exceptions.html#InvalidFormatError">InvalidFormatError</a></dd>
<dd><a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a></dd>
<dd><a href="builtins.html#Exception">builtins.Exception</a></dd>
<dd><a href="builtins.html#BaseException">builtins.BaseException</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="InvalidFormatError-__init__"><strong>__init__</strong></a>(self, message: str, expected: str = None, actual: str = None)</dt><dd><span class="code">Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<hr>
Data descriptors inherited from <a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a>:<br>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
<hr>
Static methods inherited from <a href="builtins.html#Exception">builtins.Exception</a>:<br>
<dl><dt><a name="InvalidFormatError-__new__"><strong>__new__</strong></a>(*args, **kwargs)<span class="grey"><span class="heading-text"> class method of <a href="builtins.html#Exception">builtins.Exception</a></span></span></dt><dd><span class="code">Create&nbsp;and&nbsp;return&nbsp;a&nbsp;new&nbsp;<a href="builtins.html#object">object</a>.&nbsp;&nbsp;See&nbsp;help(type)&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<hr>
Methods inherited from <a href="builtins.html#BaseException">builtins.BaseException</a>:<br>
<dl><dt><a name="InvalidFormatError-__reduce__"><strong>__reduce__</strong></a>(self, /)</dt><dd><span class="code">Helper&nbsp;for&nbsp;pickle.</span></dd></dl>

<dl><dt><a name="InvalidFormatError-__repr__"><strong>__repr__</strong></a>(self, /)</dt><dd><span class="code">Return&nbsp;repr(self).</span></dd></dl>

<dl><dt><a name="InvalidFormatError-__setstate__"><strong>__setstate__</strong></a>(self, state, /)</dt></dl>

<dl><dt><a name="InvalidFormatError-__str__"><strong>__str__</strong></a>(self, /)</dt><dd><span class="code">Return&nbsp;str(self).</span></dd></dl>

<dl><dt><a name="InvalidFormatError-add_note"><strong>add_note</strong></a>(self, note, /)</dt><dd><span class="code">Add&nbsp;a&nbsp;note&nbsp;to&nbsp;the&nbsp;exception</span></dd></dl>

<dl><dt><a name="InvalidFormatError-with_traceback"><strong>with_traceback</strong></a>(self, tb, /)</dt><dd><span class="code">Set&nbsp;self.<strong>__traceback__</strong>&nbsp;to&nbsp;tb&nbsp;and&nbsp;return&nbsp;self.</span></dd></dl>

<hr>
Data descriptors inherited from <a href="builtins.html#BaseException">builtins.BaseException</a>:<br>
<dl><dt><strong>__cause__</strong></dt>
</dl>
<dl><dt><strong>__context__</strong></dt>
</dl>
<dl><dt><strong>__dict__</strong></dt>
</dl>
<dl><dt><strong>__suppress_context__</strong></dt>
</dl>
<dl><dt><strong>__traceback__</strong></dt>
</dl>
<dl><dt><strong>args</strong></dt>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="MD5Hook">class <strong>MD5Hook</strong></a>(<a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code">MD5&nbsp;校验<br>
&nbsp;<br>
通用的校验算法，16&nbsp;字节输出。<br>
注意：MD5&nbsp;不应用于安全目的，但适合文件完整性校验。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.hooks.checksum.html#MD5Hook">MD5Hook</a></dd>
<dd><a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="MD5Hook-compute"><strong>compute</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">计算校验值<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;要校验的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验值字节</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>algo_id</strong></dt>
<dd><span class="code">算法&nbsp;ID<br>
&nbsp;<br>
对应&nbsp;FileHeader&nbsp;中的&nbsp;checksum_algo&nbsp;字段。<br>
0&nbsp;=&nbsp;无校验,&nbsp;1&nbsp;=&nbsp;CRC32,&nbsp;2&nbsp;=&nbsp;MD5,&nbsp;3&nbsp;=&nbsp;SHA1,&nbsp;4&nbsp;=&nbsp;SHA256<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;算法&nbsp;ID</span></dd>
</dl>
<dl><dt><strong>digest_size</strong></dt>
<dd><span class="code">校验值字节数<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验值长度&nbsp;(bytes)</span></dd>
</dl>
<dl><dt><strong>display_name</strong></dt>
<dd><span class="code">可读名称&nbsp;(用于&nbsp;JSON&nbsp;显示)<br>
&nbsp;<br>
默认返回类名，子类可覆盖提供更友好的名称。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;可读名称字符串</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__abstractmethods__</strong> = frozenset()</dl>

<hr>
Methods inherited from <a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>:<br>
<dl><dt><a name="MD5Hook-verify"><strong>verify</strong></a>(self, data: bytes, expected: bytes) -&gt; bool</dt><dd><span class="code">验证校验值<br>
&nbsp;<br>
默认实现直接比较计算结果和期望值。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;要校验的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;expected:&nbsp;期望的校验值<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验是否通过</span></dd></dl>

<hr>
Data descriptors inherited from <a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="ManifestBuilder">class <strong>ManifestBuilder</strong></a>(<a href="builtins.html#object">builtins.object</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#ManifestBuilder">ManifestBuilder</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;output_path:&nbsp;str,<br>
&nbsp;&nbsp;&nbsp;&nbsp;magic:&nbsp;bytes&nbsp;=&nbsp;b'GRIM',<br>
&nbsp;&nbsp;&nbsp;&nbsp;checksum_hook:&nbsp;Optional[<a href="#ChecksumHook">ChecksumHook</a>]&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;index_crypto:&nbsp;Optional[<a href="#IndexCryptoHook">IndexCryptoHook</a>]&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;path_hash_func:&nbsp;Optional[Callable[[str],&nbsp;int]]&nbsp;=&nbsp;None<br>
)<br>
&nbsp;<br>
Manifest&nbsp;文件构建器<br>
&nbsp;<br>
用于创建清单文件，记录文件路径、大小和校验信息。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn">Methods defined here:<br>
<dl><dt><a name="ManifestBuilder-__init__"><strong>__init__</strong></a>(
    self,
    output_path: str,
    magic: bytes = b'GRIM',
    checksum_hook: Optional[ChecksumHook] = None,
    index_crypto: Optional[IndexCryptoHook] = None,
    path_hash_func: Optional[Callable[[str], int]] = None
)</dt><dd><span class="code">初始化构建器<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;output_path:&nbsp;输出文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;magic:&nbsp;自定义魔法数&nbsp;(4&nbsp;bytes)<br>
&nbsp;&nbsp;&nbsp;&nbsp;checksum_hook:&nbsp;校验算法钩子&nbsp;(可选)<br>
&nbsp;&nbsp;&nbsp;&nbsp;index_crypto:&nbsp;索引加密钩子&nbsp;(可选)<br>
&nbsp;&nbsp;&nbsp;&nbsp;path_hash_func:&nbsp;自定义路径&nbsp;Hash&nbsp;函数&nbsp;(可选)</span></dd></dl>

<dl><dt><a name="ManifestBuilder-add_dir"><strong>add_dir</strong></a>(self, local_dir: str, mount_point: str = '/', recursive: bool = True) -&gt; int</dt><dd><span class="code">添加目录到清单<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;local_dir:&nbsp;本地目录路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;mount_point:&nbsp;虚拟挂载点<br>
&nbsp;&nbsp;&nbsp;&nbsp;recursive:&nbsp;是否递归扫描子目录<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;添加的文件数量<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;NotADirectoryError:&nbsp;路径不是目录</span></dd></dl>

<dl><dt><a name="ManifestBuilder-add_dir_batch"><strong>add_dir_batch</strong></a>(
    self,
    local_dir: str,
    mount_point: str = '/',
    recursive: bool = True,
    exclude_patterns: Optional[List[str]] = None,
    on_error: str = 'raise',
    progress_callback: Optional[Callable[['ProgressInfo'], None]] = None
) -&gt; BatchResult</dt><dd><span class="code">批量添加目录&nbsp;(带进度回调)<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;local_dir:&nbsp;本地目录路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;mount_point:&nbsp;虚拟挂载点<br>
&nbsp;&nbsp;&nbsp;&nbsp;recursive:&nbsp;是否递归扫描<br>
&nbsp;&nbsp;&nbsp;&nbsp;exclude_patterns:&nbsp;排除的文件模式<br>
&nbsp;&nbsp;&nbsp;&nbsp;on_error:&nbsp;错误处理策略<br>
&nbsp;&nbsp;&nbsp;&nbsp;progress_callback:&nbsp;进度回调函数<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;BatchResult&nbsp;批量操作结果</span></dd></dl>

<dl><dt><a name="ManifestBuilder-add_dir_batch_rclone"><strong>add_dir_batch_rclone</strong></a>(
    self,
    local_dir: str,
    mount_point: str = '/',
    recursive: bool = True,
    exclude_patterns: Optional[List[str]] = None,
    progress_callback: Optional[Callable[['ProgressInfo'], None]] = None
) -&gt; BatchResult</dt><dd><span class="code">批量添加目录&nbsp;(使用&nbsp;rclone&nbsp;批量计算哈希)<br>
&nbsp;<br>
此方法要求&nbsp;checksum_hook&nbsp;是&nbsp;<a href="#RcloneHashHook">RcloneHashHook</a>。<br>
使用&nbsp;rclone&nbsp;hashsum&nbsp;一次性计算整个目录的哈希，性能最优。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;local_dir:&nbsp;本地目录路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;mount_point:&nbsp;虚拟挂载点<br>
&nbsp;&nbsp;&nbsp;&nbsp;recursive:&nbsp;是否递归扫描<br>
&nbsp;&nbsp;&nbsp;&nbsp;exclude_patterns:&nbsp;排除的文件模式<br>
&nbsp;&nbsp;&nbsp;&nbsp;progress_callback:&nbsp;进度回调函数<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;BatchResult&nbsp;批量操作结果</span></dd></dl>

<dl><dt><a name="ManifestBuilder-add_file"><strong>add_file</strong></a>(self, local_path: str, vfs_path: Optional[str] = None) -&gt; None</dt><dd><span class="code">添加单个文件到清单<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;local_path:&nbsp;本地文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;vfs_path:&nbsp;虚拟路径&nbsp;(默认使用文件名)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;FileNotFoundError:&nbsp;本地文件不存在<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HashCollisionError">HashCollisionError</a>:&nbsp;路径&nbsp;Hash&nbsp;冲突</span></dd></dl>

<dl><dt><a name="ManifestBuilder-add_files_batch"><strong>add_files_batch</strong></a>(
    self,
    items: List[FileItem] | Iterator[FileItem],
    on_error: str = 'raise',
    progress_callback: Optional[Callable[['ProgressInfo'], None]] = None
) -&gt; BatchResult</dt><dd><span class="code">批量添加文件<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;items:&nbsp;FileItem&nbsp;列表或迭代器<br>
&nbsp;&nbsp;&nbsp;&nbsp;on_error:&nbsp;错误处理策略&nbsp;('raise',&nbsp;'skip',&nbsp;'abort')<br>
&nbsp;&nbsp;&nbsp;&nbsp;progress_callback:&nbsp;进度回调函数<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;BatchResult&nbsp;批量操作结果</span></dd></dl>

<dl><dt><a name="ManifestBuilder-build"><strong>build</strong></a>(self) -&gt; None</dt><dd><span class="code">构建并写入&nbsp;Manifest&nbsp;文件<br>
&nbsp;<br>
执行流程:<br>
1.&nbsp;预留&nbsp;FileHeader&nbsp;空间<br>
2.&nbsp;写入&nbsp;IndexHeader<br>
3.&nbsp;写入&nbsp;String&nbsp;Tables&nbsp;(可选加密)<br>
4.&nbsp;写入&nbsp;Entry&nbsp;Table<br>
5.&nbsp;回写&nbsp;FileHeader&nbsp;和&nbsp;IndexHeader</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>entry_count</strong></dt>
<dd><span class="code">已添加的文件数量</span></dd>
</dl>
<dl><dt><strong>path_stats</strong></dt>
<dd><span class="code">路径字典统计信息</span></dd>
</dl>
<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="ManifestJsonConverter">class <strong>ManifestJsonConverter</strong></a>(<a href="builtins.html#object">builtins.object</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code">Manifest&nbsp;和&nbsp;JSON&nbsp;互转<br>
&nbsp;<br>
JSON&nbsp;格式&nbsp;(v2&nbsp;-&nbsp;使用数字&nbsp;ID):<br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;"version":&nbsp;2,<br>
&nbsp;&nbsp;&nbsp;&nbsp;"magic":&nbsp;"GRIM",<br>
&nbsp;&nbsp;&nbsp;&nbsp;"checksum_algo":&nbsp;101,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;算法&nbsp;ID&nbsp;(从文件头自动读取)<br>
&nbsp;&nbsp;&nbsp;&nbsp;"index_flags":&nbsp;2,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;索引标志位<br>
&nbsp;&nbsp;&nbsp;&nbsp;"entries":&nbsp;[...]<br>
}<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn">Static methods defined here:<br>
<dl><dt><a name="ManifestJsonConverter-json_to_manifest"><strong>json_to_manifest</strong></a>(
    json_path: str,
    output_path: str,
    local_base_path: str,
    path_mappings: Optional[Dict[str, str]] = None,
    checksum_hook_override: Optional[ChecksumHook] = None,
    index_crypto_override: Optional[IndexCryptoHook] = None,
    progress_callback: Optional[Callable] = None
) -&gt; BatchResult</dt><dd><span class="code">将&nbsp;JSON&nbsp;转换为&nbsp;Manifest&nbsp;文件<br>
&nbsp;<br>
自动根据&nbsp;JSON&nbsp;中的&nbsp;checksum_algo/index_flags&nbsp;创建对应&nbsp;Hook。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;json_path:&nbsp;JSON&nbsp;文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;output_path:&nbsp;输出&nbsp;Manifest&nbsp;文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;local_base_path:&nbsp;本地文件基础路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;path_mappings:&nbsp;虚拟路径映射&nbsp;{虚拟前缀:&nbsp;本地前缀}<br>
&nbsp;&nbsp;&nbsp;&nbsp;checksum_hook_override:&nbsp;覆盖&nbsp;JSON&nbsp;中的校验&nbsp;Hook<br>
&nbsp;&nbsp;&nbsp;&nbsp;index_crypto_override:&nbsp;覆盖&nbsp;JSON&nbsp;中的索引加密&nbsp;Hook<br>
&nbsp;&nbsp;&nbsp;&nbsp;progress_callback:&nbsp;进度回调<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;BatchResult</span></dd></dl>

<dl><dt><a name="ManifestJsonConverter-manifest_to_json"><strong>manifest_to_json</strong></a>(manifest_path: str, output_path: str, indent: int = 2) -&gt; None</dt><dd><span class="code">将&nbsp;Manifest&nbsp;转换为&nbsp;JSON&nbsp;文件<br>
&nbsp;<br>
自动从文件头读取算法&nbsp;ID&nbsp;和标志位，无需手动传入&nbsp;Hook。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;manifest_path:&nbsp;Manifest&nbsp;文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;output_path:&nbsp;输出&nbsp;JSON&nbsp;文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;indent:&nbsp;JSON&nbsp;缩进</span></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="ManifestReader">class <strong>ManifestReader</strong></a>(<a href="builtins.html#object">builtins.object</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#ManifestReader">ManifestReader</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;file_path:&nbsp;str,<br>
&nbsp;&nbsp;&nbsp;&nbsp;checksum_hook:&nbsp;Optional[<a href="#ChecksumHook">ChecksumHook</a>]&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;index_crypto:&nbsp;Optional[<a href="#IndexCryptoHook">IndexCryptoHook</a>]&nbsp;=&nbsp;None,<br>
&nbsp;&nbsp;&nbsp;&nbsp;path_hash_func:&nbsp;Optional[Callable[[str],&nbsp;int]]&nbsp;=&nbsp;None<br>
)<br>
&nbsp;<br>
Manifest&nbsp;文件读取器<br>
&nbsp;<br>
用于读取清单文件，校验本地文件完整性。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn">Methods defined here:<br>
<dl><dt><a name="ManifestReader-__enter__"><strong>__enter__</strong></a>(self) -&gt; ManifestReader</dt></dl>

<dl><dt><a name="ManifestReader-__exit__"><strong>__exit__</strong></a>(self, *args) -&gt; None</dt></dl>

<dl><dt><a name="ManifestReader-__init__"><strong>__init__</strong></a>(
    self,
    file_path: str,
    checksum_hook: Optional[ChecksumHook] = None,
    index_crypto: Optional[IndexCryptoHook] = None,
    path_hash_func: Optional[Callable[[str], int]] = None
)</dt><dd><span class="code">初始化读取器<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;file_path:&nbsp;Manifest&nbsp;文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;checksum_hook:&nbsp;校验算法钩子&nbsp;(需与创建时一致)<br>
&nbsp;&nbsp;&nbsp;&nbsp;index_crypto:&nbsp;索引解密钩子&nbsp;(如果索引已加密)<br>
&nbsp;&nbsp;&nbsp;&nbsp;path_hash_func:&nbsp;自定义路径&nbsp;Hash&nbsp;函数</span></dd></dl>

<dl><dt><a name="ManifestReader-close"><strong>close</strong></a>(self) -&gt; None</dt><dd><span class="code">关闭文件</span></dd></dl>

<dl><dt><a name="ManifestReader-exists"><strong>exists</strong></a>(self, vfs_path: str) -&gt; bool</dt><dd><span class="code">检查虚拟路径是否存在<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;vfs_path:&nbsp;虚拟路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;路径是否存在</span></dd></dl>

<dl><dt><a name="ManifestReader-get_all_entries"><strong>get_all_entries</strong></a>(self) -&gt; List[Dict]</dt><dd><span class="code">获取所有条目的元信息<br>
&nbsp;<br>
返回每个条目的路径、大小、校验信息，不包含二进制数据。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;条目信息列表，每个元素包含:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;path:&nbsp;虚拟路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;size:&nbsp;文件大小<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;checksum:&nbsp;校验值&nbsp;(bytes)<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;checksum_hex:&nbsp;校验值&nbsp;(hex字符串)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#IndexNotDecryptedError">IndexNotDecryptedError</a>:&nbsp;索引未解密时无法遍历<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Example:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;for&nbsp;entry&nbsp;in&nbsp;reader.<a href="#ManifestReader-get_all_entries">get_all_entries</a>():<br>
&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(f"{entry['path']}:&nbsp;{entry['size']}&nbsp;bytes")</span></dd></dl>

<dl><dt><a name="ManifestReader-get_entry"><strong>get_entry</strong></a>(self, vfs_path: str) -&gt; ManifestEntry</dt><dd><span class="code">获取指定路径的条目信息<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;vfs_path:&nbsp;虚拟路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;ManifestEntry&nbsp;对象<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;FileNotFoundError:&nbsp;路径不存在</span></dd></dl>

<dl><dt><a name="ManifestReader-get_entry_by_hash"><strong>get_entry_by_hash</strong></a>(self, path_hash: int) -&gt; Optional[ManifestEntry]</dt><dd><span class="code">根据&nbsp;Hash&nbsp;获取条目<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;path_hash:&nbsp;路径&nbsp;Hash&nbsp;值<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;ManifestEntry&nbsp;或&nbsp;None</span></dd></dl>

<dl><dt><a name="ManifestReader-iter_entries"><strong>iter_entries</strong></a>(self)</dt><dd><span class="code">迭代所有条目&nbsp;(生成器模式，内存友好)<br>
&nbsp;<br>
Yields:<br>
&nbsp;&nbsp;&nbsp;&nbsp;(path,&nbsp;entry)&nbsp;元组<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#IndexNotDecryptedError">IndexNotDecryptedError</a>:&nbsp;索引未解密时无法遍历</span></dd></dl>

<dl><dt><a name="ManifestReader-list_all"><strong>list_all</strong></a>(self) -&gt; List[str]</dt><dd><span class="code">列出所有文件路径<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;所有虚拟路径列表<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#IndexNotDecryptedError">IndexNotDecryptedError</a>:&nbsp;索引未解密时无法遍历</span></dd></dl>

<dl><dt><a name="ManifestReader-list_hashes"><strong>list_hashes</strong></a>(self) -&gt; List[int]</dt><dd><span class="code">列出所有路径&nbsp;Hash<br>
&nbsp;<br>
即使索引加密也可调用此方法。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;所有&nbsp;path_hash&nbsp;列表</span></dd></dl>

<dl><dt><a name="ManifestReader-verify_file"><strong>verify_file</strong></a>(self, vfs_path: str, local_path: str) -&gt; bool</dt><dd><span class="code">校验本地文件与清单是否一致<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;vfs_path:&nbsp;清单中的虚拟路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;local_path:&nbsp;本地文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验是否通过<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Raises:<br>
&nbsp;&nbsp;&nbsp;&nbsp;FileNotFoundError:&nbsp;vfs_path&nbsp;不存在于清单中</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>entry_count</strong></dt>
<dd><span class="code">条目数量</span></dd>
</dl>
<dl><dt><strong>file_header</strong></dt>
<dd><span class="code">文件头信息</span></dd>
</dl>
<dl><dt><strong>index_header</strong></dt>
<dd><span class="code">索引头信息</span></dd>
</dl>
<dl><dt><strong>is_decrypted</strong></dt>
<dd><span class="code">索引是否已解密</span></dd>
</dl>
<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="ModeConverter">class <strong>ModeConverter</strong></a>(<a href="builtins.html#object">builtins.object</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code">Manifest&nbsp;和&nbsp;Archive&nbsp;模式互转<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn">Static methods defined here:<br>
<dl><dt><a name="ModeConverter-archive_to_manifest"><strong>archive_to_manifest</strong></a>(
    archive_path: str,
    output_path: str,
    compression_hooks: Optional[List[CompressionHook]] = None,
    checksum_hook: Optional[ChecksumHook] = None,
    index_crypto_read: Optional[IndexCryptoHook] = None,
    output_checksum_hook: Optional[ChecksumHook] = None,
    output_index_crypto: Optional[IndexCryptoHook] = None,
    progress_callback: Optional[Callable] = None
) -&gt; BatchResult</dt><dd><span class="code">将&nbsp;Archive&nbsp;转换为&nbsp;Manifest<br>
&nbsp;<br>
仅保留元信息，不包含文件数据。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;archive_path:&nbsp;Archive&nbsp;文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;output_path:&nbsp;输出&nbsp;Manifest&nbsp;文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;compression_hooks:&nbsp;Archive&nbsp;解压&nbsp;Hook<br>
&nbsp;&nbsp;&nbsp;&nbsp;checksum_hook:&nbsp;Archive&nbsp;校验&nbsp;Hook<br>
&nbsp;&nbsp;&nbsp;&nbsp;index_crypto_read:&nbsp;Archive&nbsp;索引解密&nbsp;Hook<br>
&nbsp;&nbsp;&nbsp;&nbsp;output_checksum_hook:&nbsp;输出&nbsp;Manifest&nbsp;校验&nbsp;Hook&nbsp;(默认继承)<br>
&nbsp;&nbsp;&nbsp;&nbsp;output_index_crypto:&nbsp;输出&nbsp;Manifest&nbsp;索引加密&nbsp;Hook&nbsp;(默认不加密)<br>
&nbsp;&nbsp;&nbsp;&nbsp;progress_callback:&nbsp;进度回调<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;BatchResult</span></dd></dl>

<dl><dt><a name="ModeConverter-manifest_to_archive"><strong>manifest_to_archive</strong></a>(
    manifest_path: str,
    output_path: str,
    local_base_path: str,
    path_mappings: Optional[Dict[str, str]] = None,
    checksum_hook_read: Optional[ChecksumHook] = None,
    index_crypto_read: Optional[IndexCryptoHook] = None,
    compression_hooks: Optional[List[CompressionHook]] = None,
    default_algo_id: int = 0,
    output_checksum_hook: Optional[ChecksumHook] = None,
    output_index_crypto: Optional[IndexCryptoHook] = None,
    progress_callback: Optional[Callable] = None,
    on_error: str = 'skip'
) -&gt; BatchResult</dt><dd><span class="code">将&nbsp;Manifest&nbsp;转换为&nbsp;Archive<br>
&nbsp;<br>
需要提供本地文件路径来读取实际数据。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;manifest_path:&nbsp;Manifest&nbsp;文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;output_path:&nbsp;输出&nbsp;Archive&nbsp;文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;local_base_path:&nbsp;本地文件基础路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;path_mappings:&nbsp;虚拟路径映射&nbsp;{虚拟前缀:&nbsp;本地前缀}<br>
&nbsp;&nbsp;&nbsp;&nbsp;checksum_hook_read:&nbsp;Manifest&nbsp;校验&nbsp;Hook<br>
&nbsp;&nbsp;&nbsp;&nbsp;index_crypto_read:&nbsp;Manifest&nbsp;索引解密&nbsp;Hook<br>
&nbsp;&nbsp;&nbsp;&nbsp;compression_hooks:&nbsp;输出&nbsp;Archive&nbsp;压缩&nbsp;Hook&nbsp;列表<br>
&nbsp;&nbsp;&nbsp;&nbsp;default_algo_id:&nbsp;默认压缩算法&nbsp;ID<br>
&nbsp;&nbsp;&nbsp;&nbsp;output_checksum_hook:&nbsp;输出&nbsp;Archive&nbsp;校验&nbsp;Hook<br>
&nbsp;&nbsp;&nbsp;&nbsp;output_index_crypto:&nbsp;输出&nbsp;Archive&nbsp;索引加密&nbsp;Hook<br>
&nbsp;&nbsp;&nbsp;&nbsp;progress_callback:&nbsp;进度回调<br>
&nbsp;&nbsp;&nbsp;&nbsp;on_error:&nbsp;错误处理策略<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;BatchResult</span></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="NoneChecksumHook">class <strong>NoneChecksumHook</strong></a>(<a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code">无校验<br>
&nbsp;<br>
不进行任何校验操作。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.hooks.checksum.html#NoneChecksumHook">NoneChecksumHook</a></dd>
<dd><a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="NoneChecksumHook-compute"><strong>compute</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">计算校验值<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;要校验的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验值字节</span></dd></dl>

<dl><dt><a name="NoneChecksumHook-verify"><strong>verify</strong></a>(self, data: bytes, expected: bytes) -&gt; bool</dt><dd><span class="code">验证校验值<br>
&nbsp;<br>
默认实现直接比较计算结果和期望值。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;要校验的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;expected:&nbsp;期望的校验值<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验是否通过</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>algo_id</strong></dt>
<dd><span class="code">算法&nbsp;ID<br>
&nbsp;<br>
对应&nbsp;FileHeader&nbsp;中的&nbsp;checksum_algo&nbsp;字段。<br>
0&nbsp;=&nbsp;无校验,&nbsp;1&nbsp;=&nbsp;CRC32,&nbsp;2&nbsp;=&nbsp;MD5,&nbsp;3&nbsp;=&nbsp;SHA1,&nbsp;4&nbsp;=&nbsp;SHA256<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;算法&nbsp;ID</span></dd>
</dl>
<dl><dt><strong>digest_size</strong></dt>
<dd><span class="code">校验值字节数<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验值长度&nbsp;(bytes)</span></dd>
</dl>
<dl><dt><strong>display_name</strong></dt>
<dd><span class="code">可读名称&nbsp;(用于&nbsp;JSON&nbsp;显示)<br>
&nbsp;<br>
默认返回类名，子类可覆盖提供更友好的名称。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;可读名称字符串</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__abstractmethods__</strong> = frozenset()</dl>

<hr>
Data descriptors inherited from <a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="RcloneHashHook">class <strong>RcloneHashHook</strong></a>(<a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#RcloneHashHook">RcloneHashHook</a>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;algorithm:&nbsp;str&nbsp;=&nbsp;'sha256',<br>
&nbsp;&nbsp;&nbsp;&nbsp;rclone_path:&nbsp;str&nbsp;=&nbsp;'rclone',<br>
&nbsp;&nbsp;&nbsp;&nbsp;check_on_init:&nbsp;bool&nbsp;=&nbsp;True<br>
)<br>
&nbsp;<br>
Rclone&nbsp;兼容的哈希&nbsp;Hook<br>
&nbsp;<br>
通过调用&nbsp;rclone&nbsp;hashsum&nbsp;命令计算哈希，支持多种算法。<br>
性能远超纯&nbsp;Python&nbsp;实现，适合大文件和批量处理。<br>
&nbsp;<br>
支持的算法:<br>
&nbsp;&nbsp;&nbsp;&nbsp;md5,&nbsp;sha1,&nbsp;sha256,&nbsp;sha512,&nbsp;crc32,&nbsp;blake3,&nbsp;xxh3,&nbsp;xxh128,<br>
&nbsp;&nbsp;&nbsp;&nbsp;quickxor,&nbsp;dropbox,&nbsp;whirlpool,&nbsp;hidrive,&nbsp;mailru<br>
&nbsp;<br>
Usage:<br>
&nbsp;&nbsp;&nbsp;&nbsp;hook&nbsp;=&nbsp;<a href="#RcloneHashHook">RcloneHashHook</a>('quickxor')<br>
&nbsp;&nbsp;&nbsp;&nbsp;hash_bytes&nbsp;=&nbsp;hook.<a href="#RcloneHashHook-compute_file">compute_file</a>('/path/to/file')<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.hooks.rclone.html#RcloneHashHook">RcloneHashHook</a></dd>
<dd><a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="RcloneHashHook-__init__"><strong>__init__</strong></a>(
    self,
    algorithm: str = 'sha256',
    rclone_path: str = 'rclone',
    check_on_init: bool = True
)</dt><dd><span class="code">初始化&nbsp;<a href="#RcloneHashHook">RcloneHashHook</a><br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;algorithm:&nbsp;哈希算法名称<br>
&nbsp;&nbsp;&nbsp;&nbsp;rclone_path:&nbsp;rclone&nbsp;可执行文件路径或命令名<br>
&nbsp;&nbsp;&nbsp;&nbsp;check_on_init:&nbsp;是否在初始化时检查&nbsp;rclone&nbsp;可用性</span></dd></dl>

<dl><dt><a name="RcloneHashHook-__repr__"><strong>__repr__</strong></a>(self) -&gt; str</dt><dd><span class="code">Return&nbsp;repr(self).</span></dd></dl>

<dl><dt><a name="RcloneHashHook-compute"><strong>compute</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">计算内存数据的哈希<br>
&nbsp;<br>
注意:&nbsp;此方法会将数据写入临时文件，效率较低。<br>
如果可能，请使用&nbsp;<a href="#RcloneHashHook-compute_file">compute_file</a>()&nbsp;直接计算文件。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;要计算哈希的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;哈希值&nbsp;(bytes)</span></dd></dl>

<dl><dt><a name="RcloneHashHook-compute_dir"><strong>compute_dir</strong></a>(
    self,
    dir_path: str,
    recursive: bool = False,
    timeout: Optional[int] = None
) -&gt; Dict[str, bytes]</dt><dd><span class="code">计算目录下所有文件的哈希<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;dir_path:&nbsp;目录路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;recursive:&nbsp;是否递归子目录<br>
&nbsp;&nbsp;&nbsp;&nbsp;timeout:&nbsp;超时时间&nbsp;(秒)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;{filename:&nbsp;hash_bytes}&nbsp;字典&nbsp;(非递归时为文件名，递归时为相对路径)</span></dd></dl>

<dl><dt><a name="RcloneHashHook-compute_file"><strong>compute_file</strong></a>(self, file_path: str) -&gt; bytes</dt><dd><span class="code">计算单个文件的哈希&nbsp;(推荐使用)<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;file_path:&nbsp;文件路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;哈希值&nbsp;(bytes)</span></dd></dl>

<dl><dt><a name="RcloneHashHook-compute_files_batch"><strong>compute_files_batch</strong></a>(self, file_paths: List[str], timeout: Optional[int] = None) -&gt; Dict[str, bytes]</dt><dd><span class="code">批量计算多个文件的哈希<br>
&nbsp;<br>
对于同一目录下的文件，使用目录模式批量计算。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;file_paths:&nbsp;文件路径列表<br>
&nbsp;&nbsp;&nbsp;&nbsp;timeout:&nbsp;超时时间&nbsp;(秒)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;{file_path:&nbsp;hash_bytes}&nbsp;字典</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>algo_id</strong></dt>
<dd><span class="code">算法&nbsp;ID<br>
&nbsp;<br>
对应&nbsp;FileHeader&nbsp;中的&nbsp;checksum_algo&nbsp;字段。<br>
0&nbsp;=&nbsp;无校验,&nbsp;1&nbsp;=&nbsp;CRC32,&nbsp;2&nbsp;=&nbsp;MD5,&nbsp;3&nbsp;=&nbsp;SHA1,&nbsp;4&nbsp;=&nbsp;SHA256<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;算法&nbsp;ID</span></dd>
</dl>
<dl><dt><strong>algorithm</strong></dt>
</dl>
<dl><dt><strong>digest_size</strong></dt>
<dd><span class="code">校验值字节数<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验值长度&nbsp;(bytes)</span></dd>
</dl>
<dl><dt><strong>display_name</strong></dt>
<dd><span class="code">返回&nbsp;rclone:algorithm&nbsp;格式的可读名称</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>SUPPORTED_ALGORITHMS</strong> = {'blake3', 'crc32', 'md5', 'quickxor', 'sha1', 'sha256', ...}</dl>

<dl><dt><strong>__abstractmethods__</strong> = frozenset()</dl>

<hr>
Methods inherited from <a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>:<br>
<dl><dt><a name="RcloneHashHook-verify"><strong>verify</strong></a>(self, data: bytes, expected: bytes) -&gt; bool</dt><dd><span class="code">验证校验值<br>
&nbsp;<br>
默认实现直接比较计算结果和期望值。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;要校验的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;expected:&nbsp;期望的校验值<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验是否通过</span></dd></dl>

<hr>
Data descriptors inherited from <a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="RcloneNotFoundError">class <strong>RcloneNotFoundError</strong></a>(<a href="builtins.html#Exception">builtins.Exception</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code">rclone&nbsp;未安装或不在&nbsp;PATH&nbsp;中<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.hooks.rclone.html#RcloneNotFoundError">RcloneNotFoundError</a></dd>
<dd><a href="builtins.html#Exception">builtins.Exception</a></dd>
<dd><a href="builtins.html#BaseException">builtins.BaseException</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
<hr>
Static methods inherited from <a href="builtins.html#Exception">builtins.Exception</a>:<br>
<dl><dt><a name="RcloneNotFoundError-__new__"><strong>__new__</strong></a>(*args, **kwargs)<span class="grey"><span class="heading-text"> class method of <a href="builtins.html#Exception">builtins.Exception</a></span></span></dt><dd><span class="code">Create&nbsp;and&nbsp;return&nbsp;a&nbsp;new&nbsp;<a href="builtins.html#object">object</a>.&nbsp;&nbsp;See&nbsp;help(type)&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<hr>
Methods inherited from <a href="builtins.html#BaseException">builtins.BaseException</a>:<br>
<dl><dt><a name="RcloneNotFoundError-__init__"><strong>__init__</strong></a>(self, /, *args, **kwargs)</dt><dd><span class="code">Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<dl><dt><a name="RcloneNotFoundError-__reduce__"><strong>__reduce__</strong></a>(self, /)</dt><dd><span class="code">Helper&nbsp;for&nbsp;pickle.</span></dd></dl>

<dl><dt><a name="RcloneNotFoundError-__repr__"><strong>__repr__</strong></a>(self, /)</dt><dd><span class="code">Return&nbsp;repr(self).</span></dd></dl>

<dl><dt><a name="RcloneNotFoundError-__setstate__"><strong>__setstate__</strong></a>(self, state, /)</dt></dl>

<dl><dt><a name="RcloneNotFoundError-__str__"><strong>__str__</strong></a>(self, /)</dt><dd><span class="code">Return&nbsp;str(self).</span></dd></dl>

<dl><dt><a name="RcloneNotFoundError-add_note"><strong>add_note</strong></a>(self, note, /)</dt><dd><span class="code">Add&nbsp;a&nbsp;note&nbsp;to&nbsp;the&nbsp;exception</span></dd></dl>

<dl><dt><a name="RcloneNotFoundError-with_traceback"><strong>with_traceback</strong></a>(self, tb, /)</dt><dd><span class="code">Set&nbsp;self.<strong>__traceback__</strong>&nbsp;to&nbsp;tb&nbsp;and&nbsp;return&nbsp;self.</span></dd></dl>

<hr>
Data descriptors inherited from <a href="builtins.html#BaseException">builtins.BaseException</a>:<br>
<dl><dt><strong>__cause__</strong></dt>
</dl>
<dl><dt><strong>__context__</strong></dt>
</dl>
<dl><dt><strong>__dict__</strong></dt>
</dl>
<dl><dt><strong>__suppress_context__</strong></dt>
</dl>
<dl><dt><strong>__traceback__</strong></dt>
</dl>
<dl><dt><strong>args</strong></dt>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="SHA1Hook">class <strong>SHA1Hook</strong></a>(<a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code">SHA1&nbsp;校验<br>
&nbsp;<br>
Git&nbsp;使用的校验算法，20&nbsp;字节输出。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.hooks.checksum.html#SHA1Hook">SHA1Hook</a></dd>
<dd><a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="SHA1Hook-compute"><strong>compute</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">计算校验值<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;要校验的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验值字节</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>algo_id</strong></dt>
<dd><span class="code">算法&nbsp;ID<br>
&nbsp;<br>
对应&nbsp;FileHeader&nbsp;中的&nbsp;checksum_algo&nbsp;字段。<br>
0&nbsp;=&nbsp;无校验,&nbsp;1&nbsp;=&nbsp;CRC32,&nbsp;2&nbsp;=&nbsp;MD5,&nbsp;3&nbsp;=&nbsp;SHA1,&nbsp;4&nbsp;=&nbsp;SHA256<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;算法&nbsp;ID</span></dd>
</dl>
<dl><dt><strong>digest_size</strong></dt>
<dd><span class="code">校验值字节数<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验值长度&nbsp;(bytes)</span></dd>
</dl>
<dl><dt><strong>display_name</strong></dt>
<dd><span class="code">可读名称&nbsp;(用于&nbsp;JSON&nbsp;显示)<br>
&nbsp;<br>
默认返回类名，子类可覆盖提供更友好的名称。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;可读名称字符串</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__abstractmethods__</strong> = frozenset()</dl>

<hr>
Methods inherited from <a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>:<br>
<dl><dt><a name="SHA1Hook-verify"><strong>verify</strong></a>(self, data: bytes, expected: bytes) -&gt; bool</dt><dd><span class="code">验证校验值<br>
&nbsp;<br>
默认实现直接比较计算结果和期望值。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;要校验的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;expected:&nbsp;期望的校验值<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验是否通过</span></dd></dl>

<hr>
Data descriptors inherited from <a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="SHA256Hook">class <strong>SHA256Hook</strong></a>(<a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code">SHA256&nbsp;校验<br>
&nbsp;<br>
强校验算法，32&nbsp;字节输出。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.hooks.checksum.html#SHA256Hook">SHA256Hook</a></dd>
<dd><a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="SHA256Hook-compute"><strong>compute</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">计算校验值<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;要校验的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验值字节</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>algo_id</strong></dt>
<dd><span class="code">算法&nbsp;ID<br>
&nbsp;<br>
对应&nbsp;FileHeader&nbsp;中的&nbsp;checksum_algo&nbsp;字段。<br>
0&nbsp;=&nbsp;无校验,&nbsp;1&nbsp;=&nbsp;CRC32,&nbsp;2&nbsp;=&nbsp;MD5,&nbsp;3&nbsp;=&nbsp;SHA1,&nbsp;4&nbsp;=&nbsp;SHA256<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;算法&nbsp;ID</span></dd>
</dl>
<dl><dt><strong>digest_size</strong></dt>
<dd><span class="code">校验值字节数<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验值长度&nbsp;(bytes)</span></dd>
</dl>
<dl><dt><strong>display_name</strong></dt>
<dd><span class="code">可读名称&nbsp;(用于&nbsp;JSON&nbsp;显示)<br>
&nbsp;<br>
默认返回类名，子类可覆盖提供更友好的名称。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;可读名称字符串</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__abstractmethods__</strong> = frozenset()</dl>

<hr>
Methods inherited from <a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>:<br>
<dl><dt><a name="SHA256Hook-verify"><strong>verify</strong></a>(self, data: bytes, expected: bytes) -&gt; bool</dt><dd><span class="code">验证校验值<br>
&nbsp;<br>
默认实现直接比较计算结果和期望值。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;要校验的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;expected:&nbsp;期望的校验值<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;校验是否通过</span></dd></dl>

<hr>
Data descriptors inherited from <a href="grimoire.hooks.base.html#ChecksumHook">grimoire.hooks.base.ChecksumHook</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="UnknownAlgorithmError">class <strong>UnknownAlgorithmError</strong></a>(<a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#UnknownAlgorithmError">UnknownAlgorithmError</a>(algo_id:&nbsp;int,&nbsp;algo_type:&nbsp;str&nbsp;=&nbsp;'algorithm')<br>
&nbsp;<br>
未知算法&nbsp;ID&nbsp;异常<br>
&nbsp;<br>
当遇到未注册的压缩/校验算法&nbsp;ID&nbsp;时抛出。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.exceptions.html#UnknownAlgorithmError">UnknownAlgorithmError</a></dd>
<dd><a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a></dd>
<dd><a href="builtins.html#Exception">builtins.Exception</a></dd>
<dd><a href="builtins.html#BaseException">builtins.BaseException</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="UnknownAlgorithmError-__init__"><strong>__init__</strong></a>(self, algo_id: int, algo_type: str = 'algorithm')</dt><dd><span class="code">Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<hr>
Data descriptors inherited from <a href="grimoire.exceptions.html#GrimoireError">GrimoireError</a>:<br>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
<hr>
Static methods inherited from <a href="builtins.html#Exception">builtins.Exception</a>:<br>
<dl><dt><a name="UnknownAlgorithmError-__new__"><strong>__new__</strong></a>(*args, **kwargs)<span class="grey"><span class="heading-text"> class method of <a href="builtins.html#Exception">builtins.Exception</a></span></span></dt><dd><span class="code">Create&nbsp;and&nbsp;return&nbsp;a&nbsp;new&nbsp;<a href="builtins.html#object">object</a>.&nbsp;&nbsp;See&nbsp;help(type)&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<hr>
Methods inherited from <a href="builtins.html#BaseException">builtins.BaseException</a>:<br>
<dl><dt><a name="UnknownAlgorithmError-__reduce__"><strong>__reduce__</strong></a>(self, /)</dt><dd><span class="code">Helper&nbsp;for&nbsp;pickle.</span></dd></dl>

<dl><dt><a name="UnknownAlgorithmError-__repr__"><strong>__repr__</strong></a>(self, /)</dt><dd><span class="code">Return&nbsp;repr(self).</span></dd></dl>

<dl><dt><a name="UnknownAlgorithmError-__setstate__"><strong>__setstate__</strong></a>(self, state, /)</dt></dl>

<dl><dt><a name="UnknownAlgorithmError-__str__"><strong>__str__</strong></a>(self, /)</dt><dd><span class="code">Return&nbsp;str(self).</span></dd></dl>

<dl><dt><a name="UnknownAlgorithmError-add_note"><strong>add_note</strong></a>(self, note, /)</dt><dd><span class="code">Add&nbsp;a&nbsp;note&nbsp;to&nbsp;the&nbsp;exception</span></dd></dl>

<dl><dt><a name="UnknownAlgorithmError-with_traceback"><strong>with_traceback</strong></a>(self, tb, /)</dt><dd><span class="code">Set&nbsp;self.<strong>__traceback__</strong>&nbsp;to&nbsp;tb&nbsp;and&nbsp;return&nbsp;self.</span></dd></dl>

<hr>
Data descriptors inherited from <a href="builtins.html#BaseException">builtins.BaseException</a>:<br>
<dl><dt><strong>__cause__</strong></dt>
</dl>
<dl><dt><strong>__context__</strong></dt>
</dl>
<dl><dt><strong>__dict__</strong></dt>
</dl>
<dl><dt><strong>__suppress_context__</strong></dt>
</dl>
<dl><dt><strong>__traceback__</strong></dt>
</dl>
<dl><dt><strong>args</strong></dt>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="XorObfuscateHook">class <strong>XorObfuscateHook</strong></a>(<a href="grimoire.hooks.base.html#IndexCryptoHook">grimoire.hooks.base.IndexCryptoHook</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#XorObfuscateHook">XorObfuscateHook</a>(key:&nbsp;bytes&nbsp;=&nbsp;b'GrimoireVFS')<br>
&nbsp;<br>
简单&nbsp;XOR&nbsp;混淆<br>
&nbsp;<br>
使用固定&nbsp;key&nbsp;进行&nbsp;XOR&nbsp;混淆，提供基本的索引保护。<br>
注意：这不是安全的加密，仅用于防止直接查看。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.hooks.crypto.html#XorObfuscateHook">XorObfuscateHook</a></dd>
<dd><a href="grimoire.hooks.base.html#IndexCryptoHook">grimoire.hooks.base.IndexCryptoHook</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="XorObfuscateHook-__init__"><strong>__init__</strong></a>(self, key: bytes = b'GrimoireVFS')</dt><dd><span class="code">Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;key:&nbsp;XOR&nbsp;密钥</span></dd></dl>

<dl><dt><a name="XorObfuscateHook-decrypt"><strong>decrypt</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">解密数据<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;加密后的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;解密后的数据</span></dd></dl>

<dl><dt><a name="XorObfuscateHook-encrypt"><strong>encrypt</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">加密数据<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;原始数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;加密后的数据</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>display_name</strong></dt>
<dd><span class="code">可读名称&nbsp;(用于&nbsp;JSON&nbsp;显示)<br>
&nbsp;<br>
默认返回类名，子类可覆盖提供更友好的名称。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;可读名称字符串</span></dd>
</dl>
<dl><dt><strong>flags_id</strong></dt>
<dd><span class="code">标志位&nbsp;ID<br>
&nbsp;<br>
对应&nbsp;FileHeader&nbsp;中的&nbsp;flags&nbsp;字段。<br>
用于标识使用了什么类型的索引加密/压缩。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;标志位值&nbsp;(e.g.,&nbsp;0x01,&nbsp;0x02,&nbsp;0x03)</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__abstractmethods__</strong> = frozenset()</dl>

<hr>
Data descriptors inherited from <a href="grimoire.hooks.base.html#IndexCryptoHook">grimoire.hooks.base.IndexCryptoHook</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="ZlibCompressHook">class <strong>ZlibCompressHook</strong></a>(<a href="grimoire.hooks.base.html#IndexCryptoHook">grimoire.hooks.base.IndexCryptoHook</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#ZlibCompressHook">ZlibCompressHook</a>(level:&nbsp;int&nbsp;=&nbsp;6)<br>
&nbsp;<br>
使用&nbsp;zlib&nbsp;压缩索引区<br>
&nbsp;<br>
这不是加密，只是压缩，可以减少索引区体积。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.hooks.crypto.html#ZlibCompressHook">ZlibCompressHook</a></dd>
<dd><a href="grimoire.hooks.base.html#IndexCryptoHook">grimoire.hooks.base.IndexCryptoHook</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="ZlibCompressHook-__init__"><strong>__init__</strong></a>(self, level: int = 6)</dt><dd><span class="code">Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;level:&nbsp;压缩级别&nbsp;(0-9),&nbsp;默认&nbsp;6</span></dd></dl>

<dl><dt><a name="ZlibCompressHook-decrypt"><strong>decrypt</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">解压数据</span></dd></dl>

<dl><dt><a name="ZlibCompressHook-encrypt"><strong>encrypt</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">压缩数据</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>display_name</strong></dt>
<dd><span class="code">可读名称&nbsp;(用于&nbsp;JSON&nbsp;显示)<br>
&nbsp;<br>
默认返回类名，子类可覆盖提供更友好的名称。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;可读名称字符串</span></dd>
</dl>
<dl><dt><strong>flags_id</strong></dt>
<dd><span class="code">标志位&nbsp;ID<br>
&nbsp;<br>
对应&nbsp;FileHeader&nbsp;中的&nbsp;flags&nbsp;字段。<br>
用于标识使用了什么类型的索引加密/压缩。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;标志位值&nbsp;(e.g.,&nbsp;0x01,&nbsp;0x02,&nbsp;0x03)</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__abstractmethods__</strong> = frozenset()</dl>

<hr>
Data descriptors inherited from <a href="grimoire.hooks.base.html#IndexCryptoHook">grimoire.hooks.base.IndexCryptoHook</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="ZlibXorHook">class <strong>ZlibXorHook</strong></a>(<a href="grimoire.hooks.base.html#IndexCryptoHook">grimoire.hooks.base.IndexCryptoHook</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#ZlibXorHook">ZlibXorHook</a>(key:&nbsp;bytes&nbsp;=&nbsp;b'GrimoireVFS',&nbsp;level:&nbsp;int&nbsp;=&nbsp;6)<br>
&nbsp;<br>
先压缩后&nbsp;XOR&nbsp;混淆<br>
&nbsp;<br>
结合压缩和混淆，既减少体积又提供基本保护。<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt>Method resolution order:</dt>
<dd><a href="grimoire.hooks.crypto.html#ZlibXorHook">ZlibXorHook</a></dd>
<dd><a href="grimoire.hooks.base.html#IndexCryptoHook">grimoire.hooks.base.IndexCryptoHook</a></dd>
<dd><a href="abc.html#ABC">abc.ABC</a></dd>
<dd><a href="builtins.html#object">builtins.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="ZlibXorHook-__init__"><strong>__init__</strong></a>(self, key: bytes = b'GrimoireVFS', level: int = 6)</dt><dd><span class="code">Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<dl><dt><a name="ZlibXorHook-decrypt"><strong>decrypt</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">解密数据<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;加密后的数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;解密后的数据</span></dd></dl>

<dl><dt><a name="ZlibXorHook-encrypt"><strong>encrypt</strong></a>(self, data: bytes) -&gt; bytes</dt><dd><span class="code">加密数据<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data:&nbsp;原始数据<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;加密后的数据</span></dd></dl>

<hr>
Readonly properties defined here:<br>
<dl><dt><strong>display_name</strong></dt>
<dd><span class="code">可读名称&nbsp;(用于&nbsp;JSON&nbsp;显示)<br>
&nbsp;<br>
默认返回类名，子类可覆盖提供更友好的名称。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;可读名称字符串</span></dd>
</dl>
<dl><dt><strong>flags_id</strong></dt>
<dd><span class="code">标志位&nbsp;ID<br>
&nbsp;<br>
对应&nbsp;FileHeader&nbsp;中的&nbsp;flags&nbsp;字段。<br>
用于标识使用了什么类型的索引加密/压缩。<br>
&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;标志位值&nbsp;(e.g.,&nbsp;0x01,&nbsp;0x02,&nbsp;0x03)</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__abstractmethods__</strong> = frozenset()</dl>

<hr>
Data descriptors inherited from <a href="grimoire.hooks.base.html#IndexCryptoHook">grimoire.hooks.base.IndexCryptoHook</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table></td></tr></table><p>
<table class="section">
<tr class="decor functions-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Functions</strong></td></tr>
    
<tr><td class="decor functions-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt><a name="-normalize_path"><strong>normalize_path</strong></a>(path: str, absolute: bool = False) -&gt; str</dt><dd><span class="code">路径规范化<br>
&nbsp;<br>
1.&nbsp;反斜杠统一为正斜杠<br>
2.&nbsp;移除末尾斜杠<br>
3.&nbsp;合并连续斜杠<br>
4.&nbsp;可选:&nbsp;以&nbsp;/&nbsp;开头&nbsp;(absolute=True)<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;path:&nbsp;原始路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;absolute:&nbsp;是否以&nbsp;/&nbsp;开头&nbsp;(绝对路径模式)，默认&nbsp;False<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;规范化后的路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Examples:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;<a href="#-normalize_path">normalize_path</a>("Game\\MOD\\hero.wad")<br>
&nbsp;&nbsp;&nbsp;&nbsp;'Game/MOD/hero.wad'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;<a href="#-normalize_path">normalize_path</a>("/Game/MOD/")<br>
&nbsp;&nbsp;&nbsp;&nbsp;'Game/MOD'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;<a href="#-normalize_path">normalize_path</a>("hero.wad")<br>
&nbsp;&nbsp;&nbsp;&nbsp;'hero.wad'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;<a href="#-normalize_path">normalize_path</a>("Game/MOD",&nbsp;absolute=True)<br>
&nbsp;&nbsp;&nbsp;&nbsp;'/Game/MOD'</span></dd></dl>
 <dl><dt><a name="-rclone_hash"><strong>rclone_hash</strong></a>(algorithm: str = 'sha256') -&gt; RcloneHashHook</dt><dd><span class="code">创建&nbsp;<a href="#RcloneHashHook">RcloneHashHook</a>&nbsp;的便捷函数<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;algorithm:&nbsp;算法名称<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#RcloneHashHook">RcloneHashHook</a>&nbsp;实例</span></dd></dl>
 <dl><dt><a name="-split_path"><strong>split_path</strong></a>(full_path: str) -&gt; Tuple[str, str, str]</dt><dd><span class="code">拆分完整路径为&nbsp;(目录,&nbsp;文件名,&nbsp;扩展名)<br>
&nbsp;<br>
文件名不含扩展名，扩展名包含点号。<br>
保留原始路径的前导斜杠状态（尊重用户输入）。<br>
&nbsp;<br>
Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;full_path:&nbsp;完整路径<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;(目录路径,&nbsp;文件名,&nbsp;扩展名)&nbsp;元组<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
Examples:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;<a href="#-split_path">split_path</a>("/Game/MOD/hero_skin.wad")<br>
&nbsp;&nbsp;&nbsp;&nbsp;('/Game/MOD',&nbsp;'hero_skin',&nbsp;'.wad')<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;<a href="#-split_path">split_path</a>("/config.json")<br>
&nbsp;&nbsp;&nbsp;&nbsp;('/',&nbsp;'config',&nbsp;'.json')<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;<a href="#-split_path">split_path</a>("/data/README")<br>
&nbsp;&nbsp;&nbsp;&nbsp;('/data',&nbsp;'README',&nbsp;'')<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&gt;&nbsp;<a href="#-split_path">split_path</a>("DATA/file.txt")<br>
&nbsp;&nbsp;&nbsp;&nbsp;('DATA',&nbsp;'file',&nbsp;'.txt')</span></dd></dl>
</td></tr></table><p>
<table class="section">
<tr class="decor data-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Data</strong></td></tr>
    
<tr><td class="decor data-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><strong>__all__</strong> = ['__version__', 'GrimoireError', 'HashCollisionError', 'CorruptedDataError', 'UnknownAlgorithmError', 'InvalidFormatError', 'IndexNotDecryptedError', 'normalize_path', 'split_path', 'ManifestBuilder', 'ManifestReader', 'ArchiveBuilder', 'ArchiveReader', 'ManifestJsonConverter', 'ModeConverter', 'CompressionHook', 'ChecksumHook', 'IndexCryptoHook', 'NoneChecksumHook', 'CRC32Hook', ...]</td></tr></table><p>
<table class="section">
<tr class="decor author-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Author</strong></td></tr>
    
<tr><td class="decor author-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn">Virace</td></tr></table>
</body></html>